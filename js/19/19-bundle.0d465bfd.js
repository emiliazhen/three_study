(self.webpackChunkthree_study=self.webpackChunkthree_study||[]).push([[610],{3090:function(t,o){"use strict";o.Z="precision lowp float;\r\n\r\nvarying vec4 vModelPosition;\r\nvarying vec4 vCurrentPosition;\r\n\r\nvoid main(){\r\n  vec4 redColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n  vec4 yellowColor = vec4(1.0, 1.0, 0.0, 1.0);\r\n  vec4 mixColor = mix(yellowColor,redColor, vCurrentPosition.y / 3.0);\r\n  gl_FragColor = vec4(mixColor.rgb,1.0);\r\n  // 是否是正面\r\n  if(gl_FrontFacing){\r\n    gl_FragColor = vec4(mixColor.rgb - (vModelPosition.y-25.0)/85.0 - 0.1, 1.0);\r\n  } else {\r\n    gl_FragColor = vec4(mixColor.rgb, 1.0);\r\n  }\r\n}"},5528:function(t,o){"use strict";o.Z="precision lowp float;\r\n\r\nattribute vec3 position;\r\n\r\nuniform mat4 projectionMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat4 modelMatrix;\r\n\r\n// 传递给片元着色器\r\nvarying vec4 vModelPosition;\r\nvarying vec4 vCurrentPosition;\r\n\r\nvoid main(){\r\n  vec4 modelPosition =  modelMatrix * vec4( position, 1.0 );\r\n  vModelPosition = modelPosition;\r\n  vCurrentPosition = vec4( position, 1.0 );\r\n  gl_Position = projectionMatrix * viewMatrix * modelPosition;\r\n}"},2761:function(t,o,n){"use strict";var e=n(9477),i=n(6358),r=n(5528),a=n(3090),s=n(3301),l=n(8658),u=n.p+"092e00ab606a5b986d18.glb",d=n(7732),m=n(8516),h=n.n(m),c=n(4265),v=n.n(c),p=n.p+"504149557a081b5c31be.mp3",f=n.p+"52373238900d7d9f8d30.mp3",w=n.p+"d42a9629e7709f098d55.mp3",M=n.p+"bbff3408750971354bb7.mp3",g=n.p+"a94b8e68451e496c95b9.mp3",b=n(9365),P=n(2666),y=n(3867),S="uniform vec3 uColor;\r\nvoid main(){\r\n  // 圆\r\n  float strength = distance(gl_PointCoord,vec2(0.5));\r\n  strength*=2.0;\r\n  strength = 1.0-strength;\r\n  gl_FragColor = vec4(uColor,strength);\r\n}",x="attribute vec3 aStep;\r\n\r\nuniform float uTime;\r\nuniform float uSize;\r\n\r\nvoid main(){\r\n  vec4 modelPosition = modelMatrix * vec4( position, 1.0 );\r\n  modelPosition.xyz += (aStep*uTime);\r\n  gl_Position = projectionMatrix * viewMatrix * modelPosition;\r\n  gl_PointSize = uSize;\r\n}",C="uniform vec3 uColor;\r\nvoid main(){\r\n  // 圆\r\n  float strength = distance(gl_PointCoord,vec2(0.5));\r\n  strength*=2.0;\r\n  strength = 1.0-strength;\r\n  gl_FragColor = vec4(uColor,strength);\r\n}",z="attribute float aScale;\r\nattribute vec3 aDirection;\r\n\r\nuniform float uSize;\r\nuniform float uTime;\r\n\r\nvoid main(){\r\n  vec4 modelPosition = modelMatrix * vec4( position, 1.0 );\r\n  modelPosition.xyz += aDirection*uTime*10.0;\r\n  gl_Position = projectionMatrix * viewMatrix * modelPosition;\r\n  gl_PointSize = uSize * aScale - (uTime * 20.0);\r\n}";document.title="".concat(window.location.pathname.slice(1)," 烟花");var _=new e.xsS,T=new e.cPb(75,window.innerWidth/window.innerHeight,.1,1e3);T.position.set(0,8,32),_.add(T),(new P.x).loadAsync(l).then((function(t){t.mapping=e.dSO,_.background=t,_.environment=t}));var B=new e.FIo({vertexShader:r.Z,fragmentShader:a.Z,side:e.ehD}),A=new y.E;A.load(s,(function(t){t.scene.children.splice(2,1),t.scene.children[0].material=B;for(var o=0;o<80;o++){var n=t.scene.clone(!0),e=300*(Math.random()-.5),r=300*(Math.random()-.5),a=30*Math.random()+25;n.position.set(e,a,r),i.ZP.to(n.rotation,{y:2*Math.PI,duration:10+30*Math.random(),repeat:-1}),i.ZP.to(n.position,{x:"+=".concat(5*Math.random()),y:"+=".concat(10*Math.random()),duration:5+10*Math.random(),repeat:-1,yoyo:!0}),_.add(n)}}));var E=new e.dpR;A.load(u,(function(t){_.add(t.scene);var o=new e._12(100,100),n=new d.B(o,{scale:4,textureWidth:1024,textureHeight:1024,normalMap0:E.load(h()),normalMap1:E.load(v())});n.position.y=.5,n.rotation.x=-Math.PI/2,_.add(n)}));var F=new e.CP7;F.outputEncoding=e.knz,F.toneMapping=e.LY2,F.toneMappingExposure=.06,F.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(F.domElement);var I=new b.z(T,F.domElement);I.enableDamping=!0,I.maxPolarAngle=Math.PI/4*3,I.minPolarAngle=Math.PI/4*1;var k=[],G=function(){I.update(),k.forEach((function(t){var o=t.update();if(o){var n=k.findIndex((function(t){return t.id===o}));-1!==n&&k.splice(n,1)}})),F.render(_,T),requestAnimationFrame(G)};G(),window.addEventListener("resize",(function(){T.aspect=window.innerWidth/window.innerHeight,T.updateProjectionMatrix(),F.setSize(window.innerWidth,window.innerHeight)}));var R=function(){function t(){var t=this;this.isSoundRushPlay=!1,this.isSoundBoomPlay=!1;var o="hsl(".concat(Math.floor(360*Math.random()),",100%,80%)"),n={x:40*(Math.random()-.5),y:5+10*Math.random(),z:40*-(Math.random()-.5)};this.id=Date.now().toString(36)+Math.random().toString(36).substring(2);var i=new Float32Array(3);i[0]=0,i[1]=0,i[2]=0,this.startGeometry=new e.u9r,this.startMaterial=new e.jyz({vertexShader:x,fragmentShader:S,transparent:!0,blending:e.WMw,depthWrite:!0,uniforms:{uTime:{value:0},uSize:{value:0},uColor:{value:new e.Ilk(o)}}}),this.startGeometry.setAttribute("position",new e.TlE(i,3));var r=new Float32Array(3);r[0]=n.x,r[1]=n.y,r[2]=n.z,this.startGeometry.setAttribute("aStep",new e.TlE(r,3)),this.startPoint=new e.woe(this.startGeometry,this.startMaterial),_.add(this.startPoint),this.clock=new e.SUY,this.boomGeometry=new e.u9r,this.boomMaterial=new e.jyz({vertexShader:z,fragmentShader:C,transparent:!0,blending:e.WMw,depthWrite:!1,uniforms:{uTime:{value:0},uSize:{value:0},uColor:{value:new e.Ilk(o)}}});for(var a=180+Math.floor(180*Math.random()),s=new Float32Array(3*a),l=new Float32Array(a),u=new Float32Array(3*a),d=0;d<a;d++){s[3*d+0]=n.x,s[3*d+1]=n.y,s[3*d+2]=n.z;var m=2*Math.random()*Math.PI,h=2*Math.random()*Math.PI,c=Math.random();u[3*d+0]=c*Math.sin(m)+c*Math.sin(h),u[3*d+1]=c*Math.cos(m)+c*Math.cos(h),u[3*d+2]=c*Math.sin(m)+c*Math.cos(h),l[d]=Math.random()}this.boomGeometry.setAttribute("position",new e.TlE(s,3)),this.boomGeometry.setAttribute("aScale",new e.TlE(l,3)),this.boomGeometry.setAttribute("aDirection",new e.TlE(u,3)),this.boomPoint=new e.woe(this.boomGeometry,this.boomMaterial),_.add(this.boomPoint);var v=new e.SJI,b=new e.SJI;this.soundRush=new e.BbS(v),this.soundBoom=new e.BbS(b);var P=new e.mTL;P.load(p,(function(o){t.soundRush.setBuffer(o),t.soundRush.setLoop(!1),t.soundRush.setVolume(1)})),P.load([f,w,M,g][Math.floor(4*Math.random())],(function(o){t.soundBoom.setBuffer(o),t.soundBoom.setLoop(!1),t.soundBoom.setVolume(1)}))}return t.prototype.update=function(){var t=this,o=this.clock.getElapsedTime();if(o<=1)setTimeout((function(){t.soundRush.isPlaying||t.isSoundRushPlay||(t.soundRush.play(),t.isSoundRushPlay=!0)}),200),this.startMaterial.uniforms.uTime.value=o,this.startMaterial.uniforms.uSize.value=20;else if(o>1&&o<4)setTimeout((function(){t.soundBoom.isPlaying||t.isSoundBoomPlay||(t.soundBoom.play(),t.isSoundBoomPlay=!0)}),200),this.startMaterial.uniforms.uSize.value=0,this.startPoint.clear(),this.startMaterial.dispose(),this.startGeometry.dispose(),_.remove(this.startPoint),this.boomMaterial.uniforms.uTime.value=o-1,this.boomMaterial.uniforms.uSize.value=20;else if(o>4)return this.soundRush.remove(),this.soundBoom.remove(),this.boomMaterial.uniforms.uSize.value=0,this.boomPoint.clear(),this.boomMaterial.dispose(),this.boomGeometry.dispose(),_.remove(this.boomPoint),this.id},t}();window.addEventListener("click",(function(){var t=new R;k.push(t)}))},8516:function(t,o,n){t.exports=n.p+"images/Water_1_M_Normal.54caffa453.jpg"},4265:function(t,o,n){t.exports=n.p+"images/Water_2_M_Normal.592b9bdf98.jpg"},3301:function(t,o,n){"use strict";t.exports=n.p+"9039200eb3dd993eea02.glb"},8658:function(t,o,n){"use strict";t.exports=n.p+"6b175bcfabe316c301cc.hdr"}},function(t){var o=function(o){return t(t.s=o)};t.O(0,[736,592],(function(){return o(3662),o(8188),o(7633),o(2761)}));t.O()}]);