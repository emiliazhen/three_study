(self.webpackChunkthree_study=self.webpackChunkthree_study||[]).push([[427],{2622:function(e,t,n){"use strict";var i=n(9477),r=n(9365),o=n(3076),s=n.n(o),a=n(4010),d=n.n(a),l=n(1728),c=n.n(l),m=n(2944),p=n.n(m);class u extends i.Tme{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}}const w=new i.Pa4,h=new i.yGw,v=new i.yGw,f=new i.Pa4,x=new i.Pa4;document.title="".concat(window.location.pathname.slice(1)," HTML混合3D渲染");var g=new i.xsS,y=new i.cPb(45,window.innerWidth/window.innerHeight,.1,200);y.position.set(0,5,-10),g.add(y);var b=new i.SUY,M=new i.dpR,S=new i.xo$(1,16,16),j=new i.xoR({specular:3355443,shininess:5,map:M.load(s()),specularMap:M.load(d()),normalMap:M.load(c()),normalScale:new i.FM8(.85,.85)}),E=new i.Kj0(S,j);g.add(E);var W=new i.xo$(.27,16,16),C=new i.xoR({shininess:5,map:M.load(p())}),z=new i.Kj0(W,C);g.add(z);var O=document.createElement("div");O.className="label",O.innerHTML="地球";var T=new u(O);T.position.set(0,1,0),E.add(T);var H=document.createElement("div");H.className="label-china",H.innerHTML="中国";var L=new u(H);L.position.set(-.2,.6,-.9),E.add(L);var P=document.createElement("div");P.className="label",P.innerHTML="月球";var _=new u(P);_.position.set(0,.3,0),z.add(_);var N=new class{constructor(e={}){const t=this;let n,i,r,o;const s={objects:new WeakMap},a=void 0!==e.element?e.element:document.createElement("div");function d(e,n,i){if(e.isCSS2DObject){w.setFromMatrixPosition(e.matrixWorld),w.applyMatrix4(v);const d=!0===e.visible&&w.z>=-1&&w.z<=1&&!0===e.layers.test(i.layers);if(e.element.style.display=!0===d?"":"none",!0===d){e.onBeforeRender(t,n,i);const s=e.element;s.style.transform="translate(-50%,-50%) translate("+(w.x*r+r)+"px,"+(-w.y*o+o)+"px)",s.parentNode!==a&&a.appendChild(s),e.onAfterRender(t,n,i)}const c={distanceToCameraSquared:l(i,e)};s.objects.set(e,c)}for(let t=0,r=e.children.length;t<r;t++)d(e.children[t],n,i)}function l(e,t){return f.setFromMatrixPosition(e.matrixWorld),x.setFromMatrixPosition(t.matrixWorld),f.distanceToSquared(x)}a.style.overflow="hidden",this.domElement=a,this.getSize=function(){return{width:n,height:i}},this.render=function(e,t){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),h.copy(t.matrixWorldInverse),v.multiplyMatrices(t.projectionMatrix,h),d(e,e,t),function(e){const t=function(e){const t=[];return e.traverse((function(e){e.isCSS2DObject&&t.push(e)})),t}(e).sort((function(e,t){if(e.renderOrder!==t.renderOrder)return t.renderOrder-e.renderOrder;return s.objects.get(e).distanceToCameraSquared-s.objects.get(t).distanceToCameraSquared})),n=t.length;for(let e=0,i=t.length;e<i;e++)t[e].element.style.zIndex=n-e}(e)},this.setSize=function(e,t){n=e,i=t,r=n/2,o=i/2,a.style.width=e+"px",a.style.height=t+"px"}}};N.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(N.domElement),N.domElement.style.position="fixed",N.domElement.style.top="0px",N.domElement.style.left="0px",N.domElement.style.zIndex="10";var F=new i.iMs,k=new i.CP7;k.setSize(window.innerWidth,window.innerHeight);var q=new i.Mig(16777215,.1);g.add(q);var A=new i.Ox3(16777215);A.position.set(0,0,-1),g.add(A),document.body.appendChild(k.domElement);var R=new r.z(y,N.domElement),D=function(){R.update();var e=b.getElapsedTime();z.position.set(5*Math.sin(e),0,5*Math.cos(e));var t=L.position.clone(),n=t.distanceTo(y.position);t.project(y),F.setFromCamera(t,y);var i=F.intersectObjects(g.children,!0);0===i.length?L.element.classList.add("visible"):i[0].distance<n?L.element.classList.remove("visible"):L.element.classList.add("visible");k.render(g,y),N.render(g,y),requestAnimationFrame(D)};D(),window.addEventListener("resize",(function(){y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix(),k.setSize(window.innerWidth,window.innerHeight),N.setSize(window.innerWidth,window.innerHeight)}))},3076:function(e,t,n){e.exports=n.p+"images/earth_atmos_2048.5ce4718a2b.jpg"},1728:function(e,t,n){e.exports=n.p+"images/earth_normal_2048.4757980b7f.jpg"},4010:function(e,t,n){e.exports=n.p+"images/earth_specular_2048.7c4c15698b.jpg"},2944:function(e,t,n){e.exports=n.p+"images/moon_1024.52a7ddcf68.jpg"}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[736,592],(function(){return t(3662),t(8188),t(7633),t(2622)}));e.O()}]);